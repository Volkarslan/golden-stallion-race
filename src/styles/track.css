/* ──────────────────────────────────────────────
 * Race track component styles (Tailwind layer)
 * ──────────────────────────────────────────── */
@layer components {
  .race-track {
    @apply w-full;
  }

  .race-track__header {
    @apply mb-2 flex items-center justify-between;
  }

  .race-track__title-group {
    @apply flex items-baseline gap-2;
  }

  .race-track__title {
    @apply text-base font-semibold text-text-title;
  }

  .race-track__subtitle {
    @apply text-xs text-text-muted;
  }

  .race-track__total {
    @apply text-xs text-text-muted;
  }

  .race-track__status {
    @apply mb-3 text-xs text-text-muted;
  }

  .race-track__lanes {
    @apply space-y-2;
  }

  .race-track__lane {
    @apply relative h-12 overflow-hidden rounded-full bg-hipodrome-green/40 shadow-sm;
  }

  .race-track__inner {
    @apply absolute inset-y-2 left-3 right-3 overflow-hidden rounded-full bg-hipodrome-track;
  }

  .race-track__start {
    @apply track-checkered absolute inset-y-0 left-5 z-10 w-1 opacity-90;
  }

  .race-track__finish {
    @apply track-checkered absolute inset-y-0 right-[5%] z-10 w-1 opacity-90;
  }

  .race-track__horse-wrapper {
    @apply absolute z-20 w-full;
  }

  .race-track__horse {
    @apply flex h-8 w-[5%] scale-x-[-1] items-center justify-center rounded-full text-xl transition-shadow duration-150;
  }
}

/* ──────────────────────────────────────────────
 * Checkered pattern for start / finish markers
 * ──────────────────────────────────────────── */
.track-checkered {
  background-image: repeating-linear-gradient(45deg,
      #ffffff 0,
      #ffffff 2px,
      #4a5a50 2px,
      #4a5a50 4px);
}

/* ──────────────────────────────────────────────
 * Leader glow animation
 * ──────────────────────────────────────────── */
@keyframes stallionOutlineGlow {
  0% {
    transform: rotate(-3deg) scaleX(-1);
    box-shadow:
      0 0 4px rgba(212, 175, 55, 0.4),
      0 0 8px rgba(212, 175, 55, 0.5);
  }

  50% {
    transform: rotate(3deg) scaleX(-1);
    box-shadow:
      0 0 12px rgba(232, 199, 102, 0.9),
      0 0 20px rgba(212, 175, 55, 1);
  }

  100% {
    transform: rotate(-3deg) scaleX(-1);
    box-shadow:
      0 0 4px rgba(212, 175, 55, 0.4),
      0 0 8px rgba(212, 175, 55, 0.5);
  }
}

.stallion-glow {
  animation: stallionOutlineGlow 0.4s ease-in-out infinite;
}

/* ──────────────────────────────────────────────
 * Non-leader running wobble
 * ──────────────────────────────────────────── */
@keyframes horseWobble {
  0% {
    transform: rotate(-3deg) scaleX(-1);
  }

  50% {
    transform: rotate(3deg) scaleX(-1);
  }

  100% {
    transform: rotate(-3deg) scaleX(-1);
  }
}

.running {
  animation: horseWobble 0.4s ease-in-out infinite;
}

/* ──────────────────────────────────────────────
 * Generic fade-in (used by overlay)
 * ──────────────────────────────────────────── */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

.fade-in {
  animation: fadeIn 0.4s ease forwards;
}